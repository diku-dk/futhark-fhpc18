#!/usr/bin/env python3
#
# Convert Rodinia BFS output to Futhark BFS output, so that the Futhark version
# can be run on the same datasets as the Rodinia version.
#
# The Rodinia output is generated by their 'bfs.cu' program.

import sys

def parse(filename):
    with open(filename) as f:
        d = f.read()
    d = d.strip()
    lines = d.split('\n')
    costs = [int(line.split(':')[1]) for line in lines]
    return costs

def format_futhark(costs):
    return str(costs)

def main(args):
    try:
        filename = args[0]
    except IndexError:
        print('error: missing filename argument', file=sys.stderr)
        return 1

    costs = parse(filename)
    print(format_futhark(costs))

    return 0

if __name__ == '__main__':
    sys.exit(main(sys.argv[1:]))
